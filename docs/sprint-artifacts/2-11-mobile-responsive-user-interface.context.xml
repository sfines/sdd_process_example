<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>2</epicId>
    <storyId>11</storyId>
    <title>Mobile Responsive User Interface</title>
    <status>drafted</status>
    <generatedAt>2025-11-23</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/2-11-mobile-responsive-user-interface.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>User</asA>
    <iWant>use the application effectively on my mobile phone</iWant>
    <soThat>I can play from anywhere</soThat>
    <tasks>
      - Audit existing Tailwind responsive breakpoints (sm, md, lg)
      - Test HomePage on mobile (320px, 375px, 414px widths)
      - Test RoomView on mobile (vertical layout stacking)
      - Optimize DiceInput for touch interaction (larger tap targets)
      - Make PlayerList collapsible drawer on mobile
      - Optimize RollHistory scrolling for mobile
      - Test on iOS Safari and Android Chrome
      - Add viewport meta tag for proper mobile rendering
      - Test landscape orientation
      - Write E2E tests with mobile viewport emulation
      - Document responsive design patterns
    </tasks>
  </story>

  <acceptanceCriteria>
    1. HomePage renders correctly on mobile (320px-414px widths)
    2. RoomView three-column layout stacks vertically on mobile
    3. PlayerList collapses to drawer on mobile (tap to expand)
    4. DiceInput has touch-friendly tap targets (44px minimum)
    5. RollHistory scrolls smoothly on mobile with touch gestures
    6. Room code copy button works on mobile
    7. All text readable without zooming (minimum 16px font)
    8. Viewport meta tag prevents unwanted zooming
    9. Works on iOS Safari and Android Chrome
    10. Landscape orientation usable (not blocked)
    11. E2E tests with mobile viewport emulation pass
    12. No horizontal scrolling on narrow viewports
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/architecture/adrs/007-styling-system.md</path>
        <title>ADR-007: Styling System</title>
        <section>Responsive Design</section>
        <snippet>Tailwind CSS mobile-first approach. Breakpoints: sm 640px, md 768px, lg 1024px. Mobile is default, desktop adds complexity.</snippet>
      </doc>
      <doc>
        <path>docs/uex/FIGMA_INTEGRATION_PLAN.md</path>
        <title>Figma Integration Plan</title>
        <section>Mobile Responsive Patterns</section>
        <snippet>Mobile-first design. Three-column layout stacks vertically. PlayerList becomes drawer. Touch targets 44px minimum.</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>frontend/src/pages/Home.tsx</path>
        <kind>page</kind>
        <symbol>Home</symbol>
        <lines>N/A</lines>
        <reason>Verify HomePage is mobile-responsive with proper spacing and touch targets.</reason>
      </artifact>
      <artifact>
        <path>frontend/src/pages/RoomView.tsx</path>
        <kind>page</kind>
        <symbol>RoomView</symbol>
        <lines>N/A</lines>
        <reason>Verify three-column layout stacks vertically on mobile. Test drawer behavior for PlayerList.</reason>
      </artifact>
      <artifact>
        <path>frontend/src/components/RollHistory.tsx</path>
        <kind>component</kind>
        <symbol>RollHistory</symbol>
        <lines>1-95</lines>
        <reason>Verify touch scrolling works smoothly. Check scroll area has proper mobile optimization.</reason>
      </artifact>
      <artifact>
        <path>frontend/index.html</path>
        <kind>config</kind>
        <symbol>viewport meta tag</symbol>
        <lines>N/A</lines>
        <reason>Add viewport meta tag: &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</reason>
      </artifact>
    </code>
    <dependencies>
      <npm>
        <package name="react" version="^18.2.0" />
        <package name="tailwindcss" version="latest" />
      </npm>
      <devDependencies>
        <package name="@playwright/test" version="^1.56.1" note="Mobile emulation in E2E tests" />
      </devDependencies>
    </dependencies>
  </artifacts>

  <constraints>
    - Mobile-first design approach (desktop is enhancement)
    - Minimum touch target size: 44px (Apple/Google guidelines)
    - Minimum font size: 16px (prevents auto-zoom on iOS)
    - No horizontal scrolling on any viewport width
    - Must work on iOS Safari (WebKit) and Android Chrome
    - Tailwind breakpoints: default (mobile), sm 640px, md 768px, lg 1024px
    - Test widths: 320px (iPhone SE), 375px (iPhone 12), 414px (iPhone Pro Max)
    - Landscape orientation must remain usable
    - Viewport meta tag required for proper mobile rendering
  </constraints>

  <interfaces>
    <interface>
      <name>Tailwind Responsive Classes</name>
      <kind>CSS Utilities</kind>
      <signature>
// Mobile-first approach
className="block md:flex"      // block on mobile, flex on desktop
className="w-full md:w-1/2"    // full width mobile, half on desktop
className="text-base md:text-lg" // 16px mobile, 18px desktop

// Breakpoints
sm: 640px   // Small tablets
md: 768px   // Tablets
lg: 1024px  // Desktops
      </signature>
      <path>Tailwind CSS utility classes</path>
    </interface>
    <interface>
      <name>Viewport Meta Tag</name>
      <kind>HTML Meta</kind>
      <signature>
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0"&gt;
      </signature>
      <path>frontend/index.html</path>
    </interface>
  </interfaces>

  <tests>
    <standards>E2E tests with Playwright mobile emulation. Test on real devices (iOS Safari, Android Chrome) manually.</standards>
    <locations>
      - frontend/e2e/mobile-responsive.spec.ts (NEW)
      - Manual testing on real devices
    </locations>
    <ideas>
      <test ac="1" desc="E2E test: HomePage renders on 320px, 375px, 414px widths">test_homepage_mobile_widths</test>
      <test ac="2" desc="E2E test: RoomView layout stacks vertically on mobile">test_roomview_mobile_layout</test>
      <test ac="3" desc="E2E test: PlayerList drawer collapses/expands on mobile">test_player_list_drawer_mobile</test>
      <test ac="4,5" desc="E2E test: Touch targets are 44px+, scrolling works">test_touch_interaction</test>
      <test ac="9" desc="Manual test: iOS Safari and Android Chrome functionality">test_mobile_browsers (manual)</test>
      <test ac="10" desc="E2E test: Landscape orientation usable">test_landscape_mode</test>
      <test ac="12" desc="E2E test: No horizontal scroll at any width">test_no_horizontal_scroll</test>
    </ideas>
  </tests>
</story-context>
